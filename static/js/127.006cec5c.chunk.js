"use strict";(self.webpackChunklabs_helper=self.webpackChunklabs_helper||[]).push([[127],{127:(e,s,r)=>{r.r(s),r.d(s,{default:()=>m});var t=r(950),a=r(673),l=r(818),d=r(235),i=r(501),n=r(652),c=r(192),o=r(832),x=r(414);const m=(0,a.PA)(e=>{var s,r;let{dialog:a,model:m}=e;(0,l.v)(m);const[h,p]=(0,t.useState)(null);return m.exam&&m.attempt?(0,x.jsxs)(d.aF,{onOverlayClick:e=>{e.target===e.currentTarget&&m.cancel()},size:"large",children:[(0,x.jsx)(d.rQ,{children:(0,x.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,x.jsxs)("h3",{className:"m-0 text-xl font-semibold text-text-primary",children:["\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b: ",(null===(s=m.attempt.user)||void 0===s?void 0:s.fullName)||"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"]}),(0,x.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,x.jsx)(i.A,{variant:m.attempt.status,size:"sm",children:(0,c.F)(m.attempt.status)}),(0,x.jsxs)("div",{className:"text-lg font-semibold text-accent-blue",children:["\u0411\u0430\u043b\u043b\u044b: ",m.getTotalScore()," / ",m.getMaxScore()]})]})]})}),(0,x.jsx)(d.cw,{children:(0,x.jsxs)("div",{className:"min-h-[400px]",children:[(0,x.jsx)("div",{className:"mb-6 p-4 bg-bg-secondary rounded-lg border border-border",children:(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-1",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("strong",{className:"text-text-secondary text-sm",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442:"}),(0,x.jsx)("p",{className:"text-text-primary",children:(null===(r=m.attempt.user)||void 0===r?void 0:r.fullName)||"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("strong",{className:"text-text-secondary text-sm",children:"\u041d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u044f:"}),(0,x.jsx)("p",{className:"text-text-primary",children:(e=>{if(!e||!Array.isArray(e)||0===e.length)return"\u041d\u0435\u0442 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0439";const s=e.reduce((e,s)=>e+(s.durationMs||0),0),r=Math.floor(s/6e4),t=Math.floor(s%6e4/1e3);return"".concat(e.length," \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0439, \u0432\u0441\u0435\u0433\u043e ").concat(r,"\u043c ").concat(t,"\u0441 \u0432\u043d\u0435 \u0444\u043e\u043a\u0443\u0441\u0430")})(m.attempt.violations)})]})]})}),m.exam.questions&&(0,x.jsx)("div",{className:"flex flex-col gap-6",children:m.exam.questions.map((e,s)=>{const r=String(e.id),t=m.attempt.answers[r],a=m.questionGrades[r],l=m.getQuestionMaxPoints(e.id),d="multiple_choice"===e.type&&e.correctAnswer;return(0,x.jsxs)("div",{className:"p-4 lg:p-6 bg-bg-secondary rounded-lg border border-border",children:[(0,x.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,x.jsxs)("h5",{className:"m-0 flex-1 text-text-primary",children:["\u0412\u043e\u043f\u0440\u043e\u0441 ",s+1,": ",e.question]}),(0,x.jsxs)("span",{className:"px-3 py-1 bg-accent-blue text-white rounded text-sm font-semibold ml-4",children:["\u041c\u0430\u043a\u0441. \u0431\u0430\u043b\u043b\u043e\u0432: ",l]})]}),"multiple_choice"===e.type&&e.options&&(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("strong",{className:"block mb-2 text-text-primary",children:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u043e\u0442\u0432\u0435\u0442\u0430:"}),(0,x.jsx)("ul",{className:"list-disc list-inside space-y-1 text-text-primary",children:e.options.map((e,s)=>(0,x.jsx)("li",{className:t===e?"font-semibold text-accent-blue":"text-text-secondary",children:e},s))}),(0,x.jsxs)("p",{className:"mt-2 text-text-primary",children:[(0,x.jsx)("strong",{children:"\u041e\u0442\u0432\u0435\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430:"})," ",t||"\u041d\u0435\u0442 \u043e\u0442\u0432\u0435\u0442\u0430"]})]}),"text"===e.type&&(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("strong",{className:"block mb-2 text-text-primary",children:"\u041e\u0442\u0432\u0435\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430:"}),t?(0,x.jsx)("div",{className:"p-4 bg-bg-primary rounded-md border border-border",children:(0,x.jsx)("p",{className:"text-text-primary whitespace-pre-wrap",children:t})}):(0,x.jsx)("div",{className:"text-text-secondary",children:"\u041d\u0435\u0442 \u043e\u0442\u0432\u0435\u0442\u0430"})]}),"code"===e.type&&(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("strong",{className:"block mb-2 text-text-primary",children:"\u041e\u0442\u0432\u0435\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430:"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsx)("div",{className:"border border-border rounded-md overflow-hidden",children:(0,x.jsx)("iframe",{src:"https://sharplab.io/",className:"w-full h-[400px] border-0",title:"Sharplab.io sandbox"})}),t?(0,x.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,x.jsx)("div",{className:"flex justify-end",children:(0,x.jsxs)(n.A,{variant:"secondary",size:"md",onClick:()=>(async(e,s)=>{try{await navigator.clipboard.writeText(e),p(s),setTimeout(()=>p(null),2e3)}catch(r){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f:",r)}})(t,e.id),title:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0434",className:"flex items-center gap-2",children:[(0,x.jsx)(o.T,{className:"w-4 h-4"}),h===e.id?"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e!":"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c"]})}),(0,x.jsx)("pre",{className:"bg-bg-primary p-4 rounded-md overflow-x-auto font-mono text-sm text-text-primary",children:t})]}):(0,x.jsx)("div",{className:"text-text-secondary",children:"\u041d\u0435\u0442 \u043e\u0442\u0432\u0435\u0442\u0430"})]})]}),d&&(0,x.jsxs)("div",{className:"p-4 bg-blue-500/10 dark:bg-blue-500/20 rounded-md border border-blue-500/30 mb-4",children:[(0,x.jsx)("strong",{className:"block mb-2 text-text-primary",children:"\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430 (\u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430):"}),(0,x.jsx)("div",{className:t===e.correctAnswer?"text-green-600 dark:text-green-400 font-semibold":"text-red-600 dark:text-red-400 font-semibold",children:t===e.correctAnswer?"\u2713 \u041e\u0442\u0432\u0435\u0442 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439":"\u2717 \u041e\u0442\u0432\u0435\u0442 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439. \u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442: ".concat(e.correctAnswer)}),(0,x.jsx)("p",{className:"text-xs text-text-secondary mt-2",children:"\u042d\u0442\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430. \u041e\u0446\u0435\u043d\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043d\u0438\u0436\u0435."})]}),(0,x.jsx)("div",{className:"p-4 bg-bg-tertiary rounded-md",children:(0,x.jsxs)("label",{children:[(0,x.jsx)("strong",{className:"block mb-2 text-text-primary",children:"\u041e\u0446\u0435\u043d\u043a\u0430 (\u0431\u0430\u043b\u043b\u044b):"}),(0,x.jsxs)("div",{className:"flex gap-2 items-center mt-2",children:[(0,x.jsx)("input",{type:"number",value:null!==a&&void 0!==a?a:"",onChange:s=>m.setQuestionGrade(e.id,s.target.value),min:"0",max:l,className:"px-3 py-2 border border-border rounded-md bg-bg-primary text-text-primary font-inherit text-sm transition-all focus:outline-none focus:border-accent-blue focus:ring-2 focus:ring-accent-blue/15 w-[100px]"}),(0,x.jsxs)("span",{children:["/ ",l]}),(0,x.jsx)(n.A,{variant:"primary",size:"md",onClick:()=>m.saveGrade(e.id),disabled:null===a||void 0===a,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})]},e.id||s)})})]})}),(0,x.jsx)(d.NS,{cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onCancel:()=>m.cancel(),showCancel:!0})]}):null})},235:(e,s,r)=>{r.d(s,{aF:()=>a,NS:()=>n,cw:()=>d,rQ:()=>l});r(950);var t=r(414);const a=e=>{let{children:s,onOverlayClick:r,size:a="medium"}=e;return(0,t.jsx)("div",{className:"fixed inset-0 w-full h-full bg-black/50 flex items-center justify-center z-[9999] overflow-auto p-0 md:p-5",onClick:e=>{e.target===e.currentTarget&&r&&r(e)},children:(0,t.jsx)("div",{className:"bg-bg-primary border border-border shadow-[0_4px_20px_rgba(0,0,0,0.3)] relative z-[10000] mx-auto flex flex-col overflow-hidden w-full h-full max-w-full max-h-full rounded-none md:rounded-xl md:w-[90%] md:h-auto ".concat("large"===a?"md:max-w-[1000px] md:max-h-[800px]":"md:max-w-[600px] md:max-h-[600px]"),onClick:e=>e.stopPropagation(),children:s})})},l=e=>{let{children:s}=e;return(0,t.jsx)("div",{className:"p-4 border-b border-border flex-shrink-0",children:"string"===typeof s?(0,t.jsx)("h3",{className:"m-0 text-xl font-semibold text-text-primary",children:s}):s})},d=e=>{let{children:s}=e;return(0,t.jsx)("div",{className:"p-6 overflow-y-auto flex-1 min-h-0 bg-bg-secondary",children:s})};var i=r(652);const n=function(e){let{cancelText:s="\u041e\u0442\u043c\u0435\u043d\u0430",onCancel:r,okText:a="\u041e\u041a",onOk:l,okType:d="primary",showCancel:n=!0,showOk:c=!1,okDisabled:o=!1,disabled:x=!1}=e;return(0,t.jsxs)("div",{className:"px-4 py-2 border-t border-border flex gap-3 justify-end flex-shrink-0",children:[n&&r&&(0,t.jsx)(i.A,{variant:"secondary",size:"md",onClick:r,disabled:x,children:s}),(c||l)&&a&&(0,t.jsx)(i.A,{variant:"danger"===d?"danger":"primary",size:"md",onClick:l,disabled:x||o,children:a})]})}}}]);